<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Noto Sans', 'Noto Sans Malayalam', 'Noto Sans Telugu', sans-serif;
            background-color: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        
        .chat-container {
            width: 470px;
            background-color: #fff;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
            display: flex;
            flex-direction: column;
            height: 920px;
            position: relative;
        }
        
        .chat-header {
            background-color: #d10448;
            color: white;
            padding: 16px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }
        
        .avatar {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            background-color: #fff;
            margin-right: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            color: #d10448;
            cursor: pointer;
            overflow: hidden;
        }
        
        .chat-info h2 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 2px;
        }
        
        .chat-info p {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .status-indicator {
            width: 8px;
            height: 8px;
            background-color: #4CAF50;
            border-radius: 50%;
            margin-right: 5px;
            display: inline-block;
        }
        
        .header-actions {
            margin-left: auto;
            display: flex;
            gap: 14px;
            position: relative;
        }
        
        .header-actions i {
            font-size: 18px;
            cursor: pointer;
        }
        
        .dropdown-menu {
            position: absolute;
            top: 30px;
            right: 0;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            width: 120px;
            z-index: 100;
            overflow: hidden;
            display: none;
        }
        
        .dropdown-menu.active {
            display: block;
            animation: fadeInDown 0.3s ease;
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .dropdown-menu ul {
            list-style: none;
        }
        
        .dropdown-menu ul li {
            padding: 12px 16px;
            font-size: 14px;
            color: #333;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .dropdown-menu ul li:hover {
            background-color: #f5f5f5;
        }
        
        .message-container {
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            flex-grow: 1;
            padding: 16px;
            gap: 10px;
            background-color: #f8f9fa;
        }
        
        .message {
            padding: 12px 16px;
            max-width: 75%;
            word-wrap: break-word;
            position: relative;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            animation: fadeIn 0.3s ease;
            line-height: 1.4;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .sender-message {
            background-color: #d10448;
            color: #fff;
            border-radius: 18px 18px 4px 18px;
            align-self: flex-end;
        }
        
        .receiver-message {
            background-color: #fff;
            color: #000;
            border-radius: 18px 18px 18px 4px;
            align-self: flex-start;
            border: 1px solid #e0e0e0;
        }
        
        .message-text {
            font-size: 15px;
            flex-grow: 1;
        }
        
        .timestamp {
            font-size: 11px;
            margin-top: 6px;
            opacity: 0.7;
            text-align: right;
        }
        
        .day-divider {
            text-align: center;
            margin: 16px 0;
            position: relative;
        }
        
        .day-divider span {
            background-color: #f8f9fa;
            padding: 0 10px;
            font-size: 12px;
            color: #888;
            position: relative;
            z-index: 1;
        }
        
        .day-divider:after {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            top: 50%;
            height: 1px;
            background-color: #ddd;
            z-index: 0;
        }
        
        .typing-indicator {
            padding: 10px 16px;
            align-self: flex-start;
            color: #555;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
            background-color: #f0f0f0;
            border-radius: 18px;
            margin-top: 4px;
            margin-bottom: 4px;
            display: none;
        }
        
        .typing-dots {
            display: flex;
        }
        
        .typing-dot {
            width: 6px;
            height: 6px;
            background-color: #888;
            border-radius: 50%;
            margin: 0 2px;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typingAnimation {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-4px); }
        }
        
        .input-container {
            display: flex;
            padding: 16px;
            border-top: 1px solid #eee;
            background-color: #fff;
            position: relative;
        }
        
        .input-container input {
            flex-grow: 1;
            padding: 12px 40px 12px 16px;
            border: 1px solid #ddd;
            border-radius: 24px;
            font-size: 15px;
            outline: none;
            transition: border 0.3s;
        }
        
        .input-container input:focus {
            border-color: #d10448;
            box-shadow: 0 0 0 2px rgba(209, 4, 72, 0.1);
        }
        
        .input-actions {
            position: absolute;
            right: 86px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 8px;
        }
        
        .input-actions i {
            font-size: 18px;
            color: #888;
            cursor: pointer;
            padding: 5px;
            transition: color 0.2s;
        }
        
        .input-actions i:hover {
            color: #d10448;
        }
        
        .input-container button {
            margin-left: 12px;
            padding: 10px 20px;
            background-color: #d10448;
            color: #fff;
            border: none;
            border-radius: 24px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .input-container button:hover {
            background-color: #b10339;
        }
        
        .input-container button:active {
            transform: scale(0.97);
        }
        
        .emoji-picker {
            position: absolute;
            bottom: 10px;
            left: 32px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 10px;
            width: 250px;
            display: none;
            z-index: 100;
        }
        
        .emoji-categories {
            display: flex;
            border-bottom: 1px solid #eee;
            padding-bottom: 8px;
            margin-bottom: 8px;
        }
        
        .emoji-category {
            padding: 5px;
            cursor: pointer;
            font-size: 18px;
        }
        
        .emoji-list {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 5px;
            height: 150px;
            overflow-y: auto;
        }
        
        .emoji {
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
            border-radius: 5px;
        }
        
        .emoji:hover {
            background-color: #f0f0f0;
        }
        
        /* Scrollbar styling */
        .message-container::-webkit-scrollbar {
            width: 6px;
        }
        
        .message-container::-webkit-scrollbar-track {
            background: transparent;
        }
        
        .message-container::-webkit-scrollbar-thumb {
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }
        
        .message-container::-webkit-scrollbar-thumb:hover {
            background-color: rgba(0, 0, 0, 0.3);
        }
        
        /* Message status indicators */
        .message-status {
            font-size: 10px;
            margin-top: 2px;
            text-align: right;
        }
        
        .sender-message .message-status {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .read-receipt {
            color: #4fc3f7;
        }
        
        /* Model selection menu */
        .model-selection {
            position: absolute;
            top: 75px;
            left: 16px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            width: 200px;
            z-index: 100;
            overflow: hidden;
            display: none;
        }
        
        .model-selection.active {
            display: block;
            animation: fadeInDown 0.3s ease;
        }
        
        .model-option {
            display: flex;
            align-items: center;
            padding: 12px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .model-option:hover {
            background-color: #f5f5f5;
        }
        
        .model-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 10px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .model-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .model-info {
            flex: 1;
        }
        
        .model-name {
            font-weight: 500;
            font-size: 14px;
        }
        
        .model-description {
            font-size: 11px;
            color: #777;
        }
        .audio-button {
            margin-right: 12px;
            padding: 10px;
            background-color: #d10448;
            color: #fff;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.2s;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .audio-button:hover {
            background-color: #b10339;
        }

        .audio-button.recording {
            background-color: #ff3366;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
    </style>
    <title>Chat UI</title>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <div class="avatar" id="avatarButton">
                <img src="../static/images/bot.png" height="30px" width="45px" alt="Bot" id="avatarImage">
            </div>
            <div class="chat-info">
                <h2 id="botName">MARTIAN PRODIGY</h2>
                <p><span class="status-indicator"></span>Online</p>
            </div>
            <div class="header-actions">
                <i class="fas fa-search"></i>
                <i class="fas fa-ellipsis-v" id="menuButton"></i>
                <div class="dropdown-menu" id="dropdownMenu">
                    <ul>
                        <li id="optionA">Option A</li>
                        <li id="optionB">Option B</li>
                        <li id="optionC">Option C</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="model-selection" id="modelSelection">
            <div class="model-option" data-model="martian" data-image="../static/images/bot.png" data-name="MARTIAN PRODIGY">
                <div class="model-avatar">
                    <img src="../static/images/bot.png" alt="Martian">
                </div>
                <div class="model-info">
                    <div class="model-name">MARTIAN PRODIGY</div>
                    <div class="model-description">Space exploration expert</div>
                </div>
            </div>
            <div class="model-option" data-model="earth" data-image="../static/images/bot2.png" data-name="EARTH GUARDIAN">
                <div class="model-avatar">
                    <img src="../static/images/bot2.png" alt="Earth">
                </div>
                <div class="model-info">
                    <div class="model-name">EARTH GUARDIAN</div>
                    <div class="model-description">Environmental specialist</div>
                </div>
            </div>
            <div class="model-option" data-model="quantum" data-image="../static/images/bot3.png" data-name="QUANTUM MIND">
                <div class="model-avatar">
                    <img src="../static/images/bot3.png" alt="Quantum">
                </div>
                <div class="model-info">
                    <div class="model-name">QUANTUM MIND</div>
                    <div class="model-description">Physics and math expert</div>
                </div>
            </div>
        </div>
        
        <div class="message-container" id="messageContainer">
            <div class="day-divider">
                <span>Today</span>
            </div>
            
            <div class="message sender-message">
                <div class="message-text">Hello there!</div>
                <div class="timestamp">10:01 AM</div>
                <div class="message-status">
                    <i class="fas fa-check-double read-receipt"></i>
                </div>
            </div>
            
            <div class="message receiver-message">
                <div class="message-text">Hi! How can I help you today?</div>
                <div class="timestamp">10:02 AM</div>
            </div>
            
            <div class="message sender-message">
                <div class="message-text">I have a question about your products.</div>
                <div class="timestamp">10:03 AM</div>
                <div class="message-status">
                    <i class="fas fa-check-double read-receipt"></i>
                </div>
            </div>
            
            <div class="message receiver-message">
                <div class="message-text">Sure, feel free to ask! I'm here to help you find the right solution for your needs.</div>
                <div class="timestamp">10:03 AM</div>
            </div>
            
            <div class="message sender-message">
                <div class="message-text">Do you have any recommendations for beginners?</div>
                <div class="timestamp">10:05 AM</div>
                <div class="message-status">
                    <i class="fas fa-check-double read-receipt"></i>
                </div>
            </div>
            
            <div class="message receiver-message">
                <div class="message-text">Absolutely! For beginners, I'd recommend starting with our starter kit. It comes with everything you need to get started.</div>
                <div class="timestamp">10:06 AM</div>
            </div>
            
            <div class="message sender-message">
                <div class="message-text">That sounds perfect! How much does it cost?</div>
                <div class="timestamp">10:08 AM</div>
                <div class="message-status">
                    <i class="fas fa-check-double read-receipt"></i>
                </div>
            </div>
            
            <div class="message receiver-message">
                <div class="message-text">The starter kit is priced at $49.99, but we're running a limited-time promotion right now that brings it down to $39.99.</div>
                <div class="timestamp">10:09 AM</div>
            </div>
            
            <div class="message sender-message">
                <div class="message-text">Great! One more question - does it come with a warranty?</div>
                <div class="timestamp">10:12 AM</div>
                <div class="message-status">
                    <i class="fas fa-check-double read-receipt"></i>
                </div>
            </div>
            
            <div class="message receiver-message">
                <div class="message-text">Yes, all our products come with a 1-year manufacturer warranty. You can also purchase an extended 3-year warranty for an additional $15.</div>
                <div class="timestamp">10:13 AM</div>
            </div>
            
            
        </div>
        <div>
            <div class="typing-indicator" id="typingIndicator">
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
        </div>
        
        <div class="input-container">
            <input type="text" id="messageInput" placeholder="Type your message...">
            <div class="input-actions">
                <!-- existing icons here -->
            </div>
            <button id="audioButton" class="audio-button">
                <i class="fas fa-microphone"></i>
            </button>
            <button id="sendButton">
                <i class="fas fa-paper-plane"></i>
                <span>Send</span>
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const messageContainer = document.getElementById('messageContainer');
            const messageInput = document.getElementById('messageInput');
            const sendButton = document.getElementById('sendButton');
            const typingIndicator = document.getElementById('typingIndicator');
            const menuButton = document.getElementById('menuButton');
            const dropdownMenu = document.getElementById('dropdownMenu');
            const optionA = document.getElementById('optionA');
            const optionB = document.getElementById('optionB');
            const optionC = document.getElementById('optionC');
            const avatarButton = document.getElementById('avatarButton');
            const modelSelection = document.getElementById('modelSelection');
            const botName = document.getElementById('botName');
            const avatarImage = document.getElementById('avatarImage');
            
        // Import required libraries
        const axios = require("axios").default;

        // Function to transcribe audio using Eden AI
        function transcribeAudio(audioUrl) {
        // Show loading state
        const transcriptionStatus = document.getElementById('transcription-status');
        if (transcriptionStatus) {
            transcriptionStatus.textContent = 'Transcribing...';
        }
        
        const options = {
            method: "POST",
            url: "https://api.edenai.run/v2/audio/speech_to_text_async",
            headers: {
            Authorization: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjJhZWNjYzgtNGFmYS00ZjAxLTg5MWMtNjBmN2RiYjRhM2I4IiwidHlwZSI6ImFwaV90b2tlbiJ9.ecUNgrrL5z6tjwaRnHsKfLL6efpB_PoxtmIsF32EZ_Q",
            },
            data: {
            providers: "openai",
            language: "en",
            file_url: audioUrl,
            },
        };

        return axios.request(options)
            .then((response) => {
            console.log("Transcription request submitted:", response.data);
            // Return the request ID for checking status
            return response.data;
            })
            .catch((error) => {
            console.error("Transcription request failed:", error);
            if (error.response && error.response.data) {
                console.error("API error details:", error.response.data);
            }
            if (transcriptionStatus) {
                transcriptionStatus.textContent = 'Transcription failed. Please try again.';
            }
            throw error;
            });
        }

        // Function to check the status of an async transcription request
        function checkTranscriptionStatus(requestId) {
        const statusCheckUrl = `https://api.edenai.run/v2/audio/speech_to_text_async/${requestId}`;
        
        const options = {
            method: "GET",
            url: statusCheckUrl,
            headers: {
            Authorization: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiNjJhZWNjYzgtNGFmYS00ZjAxLTg5MWMtNjBmN2RiYjRhM2I4IiwidHlwZSI6ImFwaV90b2tlbiJ9.ecUNgrrL5z6tjwaRnHsKfLL6efpB_PoxtmIsF32EZ_Q",
            }
        };

        return axios.request(options)
            .then((response) => {
            console.log("Transcription status:", response.data);
            return response.data;
            })
            .catch((error) => {
            console.error("Failed to check transcription status:", error);
            if (error.response && error.response.data) {
                console.error("API error details:", error.response.data);
            }
            throw error;
            });
        }

        // Example of how to use these functions with audio recording
        // This assumes you're using MediaRecorder API for recording

        let mediaRecorder;
        let audioChunks = [];
        let audioBlob = null;
        let audioUrl = null;

        // Start recording audio
        function startRecording() {
        audioChunks = [];
        
        navigator.mediaDevices.getUserMedia({ audio: true })
            .then(stream => {
            mediaRecorder = new MediaRecorder(stream);
            
            mediaRecorder.ondataavailable = (event) => {
                if (event.data.size > 0) {
                audioChunks.push(event.data);
                }
            };
            
            mediaRecorder.onstop = () => {
                audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
                uploadAndTranscribe(audioBlob);
            };
            
            mediaRecorder.onerror = (event) => {
                console.error('Media recorder error:', event.error);
                stopRecording();
            };
            
            mediaRecorder.start();
            console.log("Recording started");
            
            // Update UI to show recording state
            const recordButton = document.getElementById('record-button');
            if (recordButton) {
                recordButton.textContent = 'Stop Recording';
            }
            })
            .catch(error => {
            console.error('Error accessing microphone:', error);
            });
        }

        // Stop recording audio
        function stopRecording() {
        if (mediaRecorder && mediaRecorder.state !== 'inactive') {
            mediaRecorder.stop();
            console.log("Recording stopped");
            
            // Stop all audio tracks
            if (mediaRecorder.stream) {
            mediaRecorder.stream.getTracks().forEach(track => track.stop());
            }
            
            // Update UI to show stopped state
            const recordButton = document.getElementById('record-button');
            if (recordButton) {
            recordButton.textContent = 'Start Recording';
            }
        }
        }

        // Upload the audio file and get a URL
        function uploadAndTranscribe(audioBlob) {
        // In a real implementation, you'd upload the audioBlob to your server or a cloud storage service
        // and get back a publicly accessible URL
        
        // For this example, let's assume we have a function that uploads and returns a URL
        uploadAudioFile(audioBlob)
            .then(url => {
            console.log("Audio uploaded at:", url);
            
            // Now use Eden AI to transcribe the audio
            return transcribeAudio(url);
            })
            .then(response => {
            // Start polling for results
            const requestId = response.request_id;
            pollForTranscriptionResults(requestId);
            })
            .catch(error => {
            console.error("Error in upload and transcribe process:", error);
            });
        }

        // Example function to upload audio file (you would need to implement this)
        function uploadAudioFile(blob) {
        // This is a placeholder for where you'd implement your own file upload logic
        // to a service like AWS S3, Google Cloud Storage, or your own server
        
        // For testing purposes, you could use a service like MockAPI or create a FormData
        // and use axios to post it to your server
        
        return new Promise((resolve, reject) => {
            // Simulate upload delay
            setTimeout(() => {
            // This would be replaced with the actual URL returned from your upload service
            resolve("https://your-storage-service.com/path/to/uploaded/audio.wav");
            }, 1500);
        });
        }

        // Poll for transcription results until complete
        function pollForTranscriptionResults(requestId, interval = 5000) {
        const poll = setInterval(() => {
            checkTranscriptionStatus(requestId)
            .then(status => {
                if (status.status === "finished") {
                clearInterval(poll);
                displayTranscriptionResults(status.results);
                } else if (status.status === "failed") {
                clearInterval(poll);
                console.error("Transcription failed:", status.error);
                
                // Update UI to show error
                const transcriptionStatus = document.getElementById('transcription-status');
                if (transcriptionStatus) {
                    transcriptionStatus.textContent = 'Transcription failed: ' + status.error;
                }
                }
                // Continue polling if status is "pending" or "running"
            })
            .catch(error => {
                clearInterval(poll);
                console.error("Error checking transcription status:", error);
            });
        }, interval);
        }

        // Display the transcription results
        function displayTranscriptionResults(results) {
        console.log("Transcription complete:", results);
        
        // Example: Display results from different providers
        const transcriptionOutput = document.getElementById('transcription-output');
        if (transcriptionOutput) {
            let outputHtml = '<h3>Transcription Results</h3>';
            
            for (const provider in results) {
            outputHtml += `<h4>${provider}</h4>`;
            outputHtml += `<p>${results[provider].text}</p>`;
            
            if (results[provider].confidence) {
                outputHtml += `<p>Confidence: ${(results[provider].confidence * 100).toFixed(2)}%</p>`;
            }
            }
            
            transcriptionOutput.innerHTML = outputHtml;
        }
        
        // Update status
        const transcriptionStatus = document.getElementById('transcription-status');
        if (transcriptionStatus) {
            transcriptionStatus.textContent = 'Transcription complete';
        }
        }

        // Example of how to wire these functions to UI elements
        document.addEventListener('DOMContentLoaded', () => {
        const recordButton = document.getElementById('record-button');
        if (recordButton) {
            recordButton.addEventListener('click', () => {
            if (mediaRecorder && mediaRecorder.state === 'recording') {
                stopRecording();
            } else {
                startRecording();
            }
            });
        }
        });

            const botResponses = {
                'martian': [
                    "Fascinating question about space! Let me analyze that for you.",
                    "The Martian landscape is quite different from Earth. Here's what we know so far...",
                    "Space exploration requires careful planning. I'd recommend considering these factors...",
                    "The red planet has always captivated human imagination. Did you know...",
                    "From my Mars database, I can tell you that this phenomenon is quite common in space."
                ],
                'earth': [
                    "From an environmental perspective, this is an important question.",
                    "Earth's ecosystems are delicately balanced. Let me explain how this works...",
                    "Sustainability is key for our planet's future. Have you considered...",
                    "That's an excellent question about our environment! The data shows...",
                    "As an Earth Guardian, I can confirm that this approach would benefit our planet."
                ],
                'quantum': [
                    "Fascinating quantum mechanics question! When we examine the wave function...",
                    "From a mathematical perspective, we need to consider multiple dimensions here.",
                    "The physics behind this phenomenon is quite complex but elegant.",
                    "This requires some advanced calculations. Let me break it down step by step...",
                    "In quantum theory, this paradox is actually explained by considering..."
                ]
            };
            
            let currentModel = 'martian';

            function addMessage(text, isSender) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${isSender ? 'sender-message' : 'receiver-message'}`;
                
                const messageText = document.createElement('div');
                messageText.className = "message-text";
                messageText.textContent = text;
                
                const timestamp = document.createElement('div');
                timestamp.className = "timestamp";
                timestamp.textContent = getCurrentTime();
            
                messageDiv.appendChild(messageText);
                messageDiv.appendChild(timestamp);
                
                // Add read receipts for sender messages
                if (isSender) {
                    const messageStatus = document.createElement('div');
                    messageStatus.className = "message-status";
                    messageStatus.innerHTML = '<i class="fas fa-check-double read-receipt"></i>';
                    messageDiv.appendChild(messageStatus);
                }
                
                messageContainer.appendChild(messageDiv);
                scrollToBottom();
            }

            function getCurrentTime() {
                const now = new Date();
                let hours = now.getHours();
                const minutes = now.getMinutes().toString().padStart(2, '0');
                const ampm = hours >= 12 ? 'PM' : 'AM';
                
                hours = hours % 12;
                hours = hours ? hours : 12; 
                
                return `${hours}:${minutes} ${ampm}`;
            }
            
            function scrollToBottom() {
                messageContainer.scrollTop = messageContainer.scrollHeight;
            }
            
            function simulateBotResponse() {
                typingIndicator.style.display = 'flex';
                scrollToBottom();
                const responseTime = Math.floor(Math.random() * 2000) + 1000;
                
                setTimeout(() => {
                    typingIndicator.style.display = 'none';
                    const modelResponses = botResponses[currentModel];
                    const randomIndex = Math.floor(Math.random() * modelResponses.length);
                    const responseText = modelResponses[randomIndex];
                    addMessage(responseText, false);
                }, responseTime);
            }
            
            sendButton.addEventListener('click', sendMessage);
            
            messageInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            function sendMessage() {
                const message = messageInput.value.trim();
                
                if (message) {
                    addMessage(message, true);
                    messageInput.value = '';
                    simulateBotResponse();
                }
            }
            
            // Avatar click to show model selection
            avatarButton.addEventListener('click', function() {
                modelSelection.classList.toggle('active');
            });
            
            // Handle model selection
            document.querySelectorAll('.model-option').forEach(option => {
                option.addEventListener('click', function() {
                    const model = this.getAttribute('data-model');
                    const imageSrc = this.getAttribute('data-image');
                    const name = this.getAttribute('data-name');
                    
                    // Update the current model
                    currentModel = model;
                    
                    // Update the UI
                    avatarImage.src = imageSrc;
                    botName.textContent = name;
                    
                    // Add a system message
                    addMessage(`You are now chatting with ${name}`, false);
                    
                    // Close the model selection
                    modelSelection.classList.remove('active');
                });
            });
            
            // Dropdown menu toggling
            menuButton.addEventListener('click', function() {
                dropdownMenu.classList.toggle('active');
            });
            
            // Handle dropdown menu option clicks
            optionA.addEventListener('click', function() {
                addMessage("You selected Option A", false);
                dropdownMenu.classList.remove('active');
            });
            
            optionB.addEventListener('click', function() {
                addMessage("You selected Option B", false);
                dropdownMenu.classList.remove('active');
            });
            
            optionC.addEventListener('click', function() {
                addMessage("You selected Option C", false);
                dropdownMenu.classList.remove('active');
            });
            
            // Close menus when clicking outside
            document.addEventListener('click', function(e) {
                if (!menuButton.contains(e.target) && !dropdownMenu.contains(e.target)) {
                    dropdownMenu.classList.remove('active');
                }
                
                if (!avatarButton.contains(e.target) && !modelSelection.contains(e.target)) {
                    modelSelection.classList.remove('active');
                }
            });
            
            // Search icon functionality
            document.querySelector('.fa-search').addEventListener('click', function() {
                alert('Search feature would open here');
            });
            
            scrollToBottom();
        });
    </script>
</body>
</html>